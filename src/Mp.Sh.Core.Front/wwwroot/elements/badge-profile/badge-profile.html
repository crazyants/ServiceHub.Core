<!-- Polymer -->
<link rel="import" href="../../bower_components/polymer/polymer.html" />

<!-- Iron elements -->
<link rel="import" href="../../bower_components/paper-styles/typography.html" />
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html" />
<link rel="import" href="../../bower_components/iron-form/iron-form.html" />
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html" />
<link rel="import" href="../../bower_components/iron-icons/social-icons.html" />
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html" />

<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html" />
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html" />
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html" />
<link rel="import" href="../../bower_components/paper-item/paper-icon-item.html" />

<!-- Custom elements -->
<link rel="import" href="../../bower_components/image-mask/image-mask.html" />
<link rel="import" href="../paper-theme/paper-theme.html" />

<dom-module id="badge-profile">
    <template>
        <style include="iron-flex iron-flex-alignment paper-theme">
            .container {
                background-color: var(--paper-indigo-50);
                height: 120px;
                padding: 16px;
            }

            paper-menu-button,
            paper-icon-item {
                cursor: pointer;
            }

            .name {
                @apply(--paper-font-body2);
            }

            .email {
                @apply(--paper-font-body1);
            }
        </style>

        <div class="container layout vertical start">
            <image-mask shape="circle" size="70" src="https://en.gravatar.com/userimage/3208099/5a8ed5c6dfd4707bc1f016e58e4b2c57.png"></image-mask>
            <span class="name">{{userProfile.displayName}}</span>
            <div class="layout horizontal center justified full-width">
                <span class="email">{{userProfile.email}}</span>
                <paper-menu-button>
                    <paper-icon-button icon="arrow-drop-down" class="dropdown-trigger"></paper-icon-button>
                    <paper-menu class="dropdown-content">
                        <paper-icon-item>
                            <iron-icon icon="social:person" item-icon></iron-icon>
                            Profile
                        </paper-icon-item>
                        <paper-icon-item on-tap="_logout">
                            <iron-icon icon="exit-to-app" item-icon></iron-icon>
                            Logout
                        </paper-icon-item>
                    </paper-menu>
                </paper-menu-button>
            </div>
        </div>
    </template>
    <script>
        /**
        * <badge-profile> represents the current logged in user
        */
        Polymer({
            is: 'badge-profile',

            properties: {
                /**
                * The current claims DTO
                */
                userProfile: {
                    type: Object,
                    value: [],
                    reflectToAttribute: true
                }
            },

            /**
            * Logout from the UX and call the Identity Server logout method
            */
            _logout: function () {
                location.href = '/Home/Logout';
            }
        });
    </script>
</dom-module>