@using IdentityServer4.Extensions
@{
    string name = null;
    string logoutId = null;
    if (!true.Equals(ViewData["signed-out"]))
    {
        var user = await Context.GetIdentityServerUserAsync();
        name = user?.FindFirst("name")?.Value;
        logoutId = user?.FindFirst("id_token")?.Value;
    }
}

@if (name != null)
{
    <ul class="nav navbar-nav">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">@name <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a asp-action="Logout" asp-controller="Account">Logout</a></li>
            </ul>
        </li>
    </ul>
}

<h1>Home page | protected</h1>